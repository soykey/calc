<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <title>Calculator</title>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css'>
  </head>
  <body>
  <section class='section'>
    <div class='container'>
      <span id="formula"></span>
      <h1 class='title' id="result">
        Calculator
      </h1>
      <input type='text'  id='input' class='input' value='' style="width: 137px;" autofocus onkeydown="prsetr(event.keyCode)" autocomplete="off">
      <div>
        <div>
          <button class='button' onclick='add(this)' value='1'>1</button>
          <button class='button' onclick='add(this)' value='2'>2</button>
          <button class='button' onclick='add(this)' value='3'>3</button>
        </div>
        <div>
          <button class='button' onclick='add(this)' value='4'>4</button>
          <button class='button' onclick='add(this)' value='5'>5</button>
          <button class='button' onclick='add(this)' value='6'>6</button>
        </div>
        <div>
          <button class='button' value='7' onclick='add(this)'>7</button>
          <button class='button' value='8' onclick='add(this)'>8</button>
          <button class='button' value='9' onclick='add(this)'>9</button>
        </div>
        <div>
          <button class='button' value='0' onclick='add(this)'>0</button>
          <button class='button' value='.' onclick='add(this)'>.</button>
          <button class='button' onclick='calc()'>=</button>      
        </div>
      </div> 
    </div>
  </section>
  <script>
    let hsty = []
    const input = document.getElementById('input')
    const result = document.getElementById('result')
    const formula = document.getElementById('formula')
    const add = (e) =>{
      input.value += e.value
    }
    const clear = () => {
      input.value = ''
    }
    const updateres = (value) => {
      result.innerHTML=value
    }
    const updatefor = (value) => {
      formula.innerHTML=value
    }
    const calc = () => {
        const f = new Function('return '+input.value)
        updateres(f().toString())
        updatefor(input.value)
        hsty.push(input.value)
        clear()
    }
    let count = 0
    let p = 0
    const prsetr = (key) => {
      if (key == 13) {
        calc()
      }
      if (key == 38 &&count>0) {
        if (p) {
          p++
          count = hsty.length
        }
        count--
        input.value = hsty[count] 
      }
      if (key == 40 && count < hsty.length-1) {
        count++
        input.value = hsty[count]
      }
    }
    </script>
  </body>
</html>